<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Копирование...</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  const params = new URLSearchParams(window.location.search);
  const text = params.get("text") || "Нечего копировать";

  // Пытаемся скопировать сразу при загрузке
  async function copyToClipboard() {
    try {
      await navigator.clipboard.writeText(text);
      document.body.innerHTML = "<h2>✅ Сообщение скопировано!</h2>";
    } catch (err) {
      document.body.innerHTML = `<h2>❌ Ошибка: ${err.message}</h2>`;
    }
    setTimeout(() => Telegram.WebApp.close(), 1500);
  }

  window.onload = copyToClipboard;
</script>
</head>
<body style="text-align:center;font-family:sans-serif;padding-top:50px;">
  <h2>Копируем...</h2>
</body>
</html>
